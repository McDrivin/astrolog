<div class="container">
  <div class="d-flex justify-content-between align-items-center mt-3">
    <h1><%= @topic.title %></h1>
    <%# link_to "New Post", new_post_path, class: "btn btn-primary"  %>
  </div>
  <p><%= @topic.description %></p>
  <div class="d-flex justify-content-between align-items-center mt-3">
    <h2>Members</h2>
    <% if @current_user_topic_member %>
      <%= link_to "Leave topic", topic_member_path(@current_user_topic_member), data: {turbo_method: :delete}, class: "btn btn-warning" %>
    <% else %>
      <%= link_to "Join topic", topic_topic_members_path(@topic), data: {turbo_method: :post}, class: "btn btn-primary" %>
    <% end %>
  </div>
  <% @topic.topic_members.each do |member| %>
    <%= render member %>
  <% end %>
  <ul>
    <% @posts.each do |post| %>
      <li>
        <%= post.title %>
        <%= link_to "", post_path(post),  class: "fa-solid fa-reply" %>
      </li>
    <% end %>
  </ul>
  <h2>Create a post</h2>
  <%= simple_form_for [@topic, @post] do |f| %>
    <%= f.input :title %>
    <%= f.rich_text_area :content %>
    <%= f.button :submit, class: "btn btn-primary mt-3" %>
  <% end %>
</div>
